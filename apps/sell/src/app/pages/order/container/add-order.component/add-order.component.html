<div class='px-5 pt-5 pb-3 '>
  <form id='form' [formGroup]='formGroup' class='mt-3' style='width: 100%'>
    <div class='d-flex justify-content-between  align-items-center ' style='background: #e2e4e9;
              position: fixed;
              top: 94px;
              left: 0;
              right: 0;
              height: 50px;
              z-index: 10;
          '>
      <div class='row h3 ml-2 '>
        Thêm đơn hàng
      </div>
      <div class=' d-flex flex-row  '>
        <button (click)='onSubmit()' class='btn btn-primary mr-3 '>Lưu</button>
      </div>
    </div>
    <div [formGroup]='formGroup' class='mt-3' style='padding: 0 10%;'>
      <div>
        <div class='h4 mt-4'>
          Thông tin đơn hàng
        </div>
        <div class='row ml-2 mt-5'>
          <div class='col-3' [formGroup]='formGroup'>
            <label for='createdAt' class='h5'>Ngày tạo đơn hàng<span class='star'>*</span>
            </label>
            <input type='date' class='form-control' id='createdAt' formControlName='createdAt'
              [ngClass]="{ 'is-invalid': submitted && checkValid.createdAt.errors?.required }">
            <div *ngIf='submitted && checkValid.createdAt.errors?.required' class='invalid-feedback'>
              <div>Chưa nhập ngày tạo đơn hàng</div>
            </div>
          </div>
          <div class='col-6' [formGroup]='formGroup'>
            <label for='explain' class='h5'>Diễn giải</label>
            <input type='text' class='form-control' id='explain' formControlName='explain'>
          </div>
        </div>
        <div class='row mt-3 ml-2 d-flex flex-column'>
          <div class='ml-3 h5'>Nơi nhận hàng<span class='star'>*</span>
          </div>
          <div class='d-flex'>
            <app-pick-location class='col-9' [reload$]='reload' [formGroup]='formGroup' [form]='checkValid'
              [submitted]='submitted' (eventSelectWard)='onSelectWard($event)'></app-pick-location>
          </div>
        </div>
        <div *ngIf='customerPicked' class='animated fadeIn'>
          <div class='h5 ml-4'> Khách hàng</div>
          <table class='mb-1 ml-4' style="width:98%">
            <tr>
              <th class='text-center'>Tên khách hàng</th>
              <th class='text-center'>Loại khách hàng</th>
              <th class='text-center'>Nguồn khác hàng</th>
              <th class='text-center'>Số điện thoại</th>
              <th class='text-center'>Email</th>
              <th class='text-center'>Bỏ chọn</th>
            </tr>
            <tr>
              <td class='text-center'>{{customerPicked.lastName}}</td>
              <td class='text-center' *ngIf='customerPicked?.type === customerType.AGENCY'> Đại lý</td>
              <td class='text-center' *ngIf='customerPicked?.type === customerType.RETAIL'> Khách lẻ</td>
              <td class='text-center' *ngIf='customerPicked?.resource === resourceType.OTHER'>Khác</td>
              <td class='text-center' *ngIf='customerPicked?.resource === resourceType.RESEARCH'>Tra cứu</td>
              <td class='text-center' *ngIf='customerPicked?.resource === resourceType.SELF_FIND'>Tự tìm</td>
              <td class='text-center' *ngIf='customerPicked?.resource === resourceType.INTRODUCED'>Giới thiệu</td>
              <td class='text-center'>{{customerPicked?.phone}} </td>
              <td class='text-center' *ngIf='customerPicked?.email'>{{customerPicked.email}} </td>
              <td class='text-center' *ngIf='!customerPicked?.email'>Chưa cập nhật </td>
              <td class='text-center'> <button (click)='deleteCustomerId()' style=' font-size: 10px'
                  class='btn btn-danger '>bỏ chọn</button> </td>
            </tr>
          </table>
          <div class='mt-2 ml-4 pointer' (click)='pickCustomer()'>
            <div class=' d-flex justify-content-center align-items-center ' style='width: 200px;
                        height: 40px;
                        background-color: #f0f2f4;
                        border: 1px solid #d3d7de;
                        border-radius: 4px;'><span class='h5' style='color: #20a8d8; margin-bottom: 0'>Chọn Khách hàng
                <img class='ml-2' src='assets/icon/share/plus-lg.svg' alt='plus'> </span>
            </div>
          </div>
        </div>

        <div class='mt-5 ml-4 pointer animated fadeIn' *ngIf='!customerPicked' (click)='pickCustomer()'
          style="width:98%">
          <div class=' d-flex justify-content-center align-items-center ' style=' height: 63px;
                  background-color: #f0f2f4;
                  border: 1px solid #d3d7de;
                  border-radius: 4px;'><span class='h5' style='color: #20a8d8;  margin-bottom: 0'>Chọn Khách hàng <img
                class='ml-2' src='assets/icon/share/plus-lg.svg' alt='plus'> </span>
          </div>
        </div>
        <div *ngIf='commodityIds.length > 0' class='mt-3 animated fadeIn'>
          <div class='h5 ml-4'> Hàng hóa</div>
          <table class='mb-1 ml-4' style="width:98%">
            <tr>
              <th class='text-center'>Mã hàng hóa</th>
              <th class='text-center'>Tên hàng hóa</th>
              <th class='text-center'>Giá trước KM</th>
              <th class='text-center'>Số lượng</th>
              <th class='text-center'>Khuyến mãi</th>
              <th class='text-center'>Mua thêm</th>
              <th class='text-center'>Giá sau KM</th>
              <th class='text-center'>Đơn vị</th>
              <th class='text-center'>Bỏ chọn</th>
            </tr>
            <tr *ngFor='let commodity of CommoditiesPicked'>
              <td class='text-center'> {{commodity.code}} </td>
              <td class='text-center'> {{commodity.name}} </td>
              <td class='text-center'>{{commodity.price|number:'1.0-0'|notEmpty:'0'}} đ </td>
              <td class='text-center'>{{commodity.amount|number :'1.0-0'}} </td>
              <td class='text-center'>{{commodity.gift|number :'1.0-0'}} </td>
              <td class='text-center'>{{commodity.more.amount|number :'1.0-0'}} </td>
              <td class='text-center'> {{commodity.more.price|number:'1.0-0'|notEmpty:'0'}} đ </td>
              <td class='text-center ' *ngIf='commodity?.unit === commodityUnit.KG'> Kilogam</td>
              <td class='text-center ' *ngIf='commodity?.unit === commodityUnit.CON'> Con</td>
              <td class='text-center'> <button (click)='deleteCommodityId(commodity.id)' style=' font-size: 10px'
                  class='btn btn-danger'>bỏ chọn</button> </td>
            </tr>
          </table>
          <div class=' ml-4  my-2' (click)='pickCommodities()'>
            <div class=' d-flex justify-content-center align-items-center ' style=' width: 200px;
                        height: 40px;
                        background-color: #f0f2f4;
                        border: 1px solid #d3d7de;
                        border-radius: 4px;'><span class='h5 pointer' style='color: #20a8d8 ; margin-bottom: 0'>Chọn
                hàng hóa <img class='ml-2' src='assets/icon/share/plus-lg.svg' alt='plus'> </span>
            </div>
          </div>
        </div>
        <div class=' ml-4  my-5 animated fadeIn ' *ngIf='commodityIds.length === 0' style="width:98%"
          (click)='pickCommodities()'>
          <div class=' d-flex justify-content-center align-items-center ' style=' height: 63px;
                  background-color: #f0f2f4;
                  border: 1px solid #d3d7de;
                  border-radius: 4px;'><span class='h5 pointer' style='color: #20a8d8;  margin-bottom: 0'>Chọn hàng hóa
              <img class='ml-2' src='assets/icon/share/plus-lg.svg' alt='plus'> </span>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>