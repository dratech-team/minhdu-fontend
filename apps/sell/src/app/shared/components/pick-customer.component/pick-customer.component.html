<div class="main-popup">
  <div mat-dialog-close class='close-popup' *ngIf="isDialog">
    <span class='mr-1'> close</span>
    <div class='x-popup'>
      <img src='assets/icon/share/x2-lg.svg' alt='cancel'>
    </div>
  </div>
  <button nz-button nzType="primary" (click)='addCustomer()'>
    Thêm khách hàng
  </button>
  <div class="mt-2">
    <nz-table #tablePickCustomer
              [formGroup]='formGroup'
              [nzData]="customers"
              [nzScroll]="{y: '500px'}"
              [nzPageSize]="pageSizeTable"
              (nzPageIndexChange)="onPagination($event)"
              nzSize='middle'
    >
      <thead>
      <tr>
        <th>
          <div>Tất cả</div>
          <mat-checkbox
            *ngIf='data.pickMore'
            class='example-margin m-auto '
            [checked]='isSelectAll'
            [indeterminate]='someComplete()'
            (change)='setAll($event.checked)'>
          </mat-checkbox>
          <input disabled *ngIf='data.pickOne || pickOne'>
        </th>
        <th>
          <div>Tên Khách hàng</div>
          <input
            nz-input
            type='search'
            placeholder='tran gia hieu'
            formControlName='name'
          >
        </th>
        <th>
          <div>Số điện thoại</div>
          <input
            disabled
            type='search'
            nz-input
          >
        </th>
        <th>
          <div>Loại khách hàng</div>
          <nz-select  style='width: 100%' formControlName='type'>
            <nz-option nzValue='{{customerType.RETAIL}}' nzLabel="Bán lẻ"></nz-option>
            <nz-option nzValue='{{customerType.AGENCY}}' nzLabel="Đại lý"></nz-option>
            <nz-option nzValue='' nzLabel="tất cả"></nz-option>
          </nz-select>
        </th>
        <th>
          <div>Nguồn khách hàng</div>
          <input disabled nz-input>
        </th>
      </tr>
      </thead>
      <tbody>
      <ng-template ngFor let-customer [ngForOf]="tablePickCustomer.data">
        <tr>
          <td class='py-2'>
            <mat-checkbox
              *ngIf='data.pickMore'
              class='checkID'
              [checked]='customerIds.includes(customer.id)'
              (change)='updateAllSelect(customer.id)'>
            </mat-checkbox>
            <input
              style='height: 12px ; margin: auto'
              (change)='pickOneCustomer(customer.id)'
              [checked]='customer.id === customerId'
              *ngIf='data.pickOne || pickOne'
              type='radio' name='pick-one'>
          </td>
          <td class='pointer'>{{customer.lastName}}</td>
          <td class='pointer'>{{customer.phone}}</td>
          <td>{{customer?.type  | transform:CustomerTypeConstant }} </td>
          <td> {{customer?.resource | transform:customerResourcesConstant}}</td>
        </tr>
      </ng-template>
      </tbody>
    </nz-table>
  </div>
  <button *ngIf='data.pickOne' nz-button nzType="primary" (click)='closeDialog()' mat-dialog-close> xác nhận
  </button>
</div>


