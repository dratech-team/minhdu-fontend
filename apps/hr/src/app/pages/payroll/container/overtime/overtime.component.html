<ngx-skeleton-loader *ngIf='!(loaded$ | async); else salary' count='18' appearance='line'></ngx-skeleton-loader>
<ng-template #salary>
  <div class='main-profile' style='width: fit-content; margin: 0 auto'>
    <form [formGroup]='formGroup' #header class=' header-profile mt-1 animated fadeIn'>
      <div class='border-start title-header default'>
        <div class='title-profile'>Mã nhân viên</div>
        <input class='form-control input-profile' type='text' disabled>
      </div>
      <div class='border-start title-header name'>
        <div class='title-profile'>Tên nhân viên</div>
        <input class='form-control input-profile ' type='search' disabled>
      </div>
      <div class='border-start title-header gender' [formGroup]='formGroup'>
        <div class='title-profile'>Giới tính</div>
        <input class='form-control input-profile ' type='search' disabled>
      </div>
      <div class='border-start title-header default'>
        <div class='title-profile'>Chức vụ</div>
        <input class='form-control' type='text' matInput disabled>
      </div>

      <div class='border-start title-header name'>
        <div class='title-profile'>Tháng</div>
        <div class='d-flex'>
          <mat-date-range-input [rangePicker]='picker'>
            <input matStartDate formControlName='startAt' placeholder='Từ ngày'>
            <input matEndDate formControlName='endAt' placeholder='Đến ngày'>
          </mat-date-range-input>
          <mat-datepicker-toggle matSuffix [for]='picker'></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
        </div>

      </div>
      <div class='border-start title-header note'>
        <div class='title-profile'>Loại tăng ca</div>
        <input class='form-control' type='text' matInput [matAutocomplete]='templateOvertime' formControlName='title'>
        <mat-autocomplete #templateOvertime='matAutocomplete'>
          <mat-option *ngFor='let template of templateOvertime$ | async' [value]='template.title'
                      (onSelectionChange)='onSelectTemplateOvertime($event, template.title)'>
            {{template.title}}
          </mat-option>
        </mat-autocomplete>
      </div>
      <div class='border-start title-header default'>
        <div class='title-profile'>Đơn vị tính</div>
        <input class='form-control input-profile ' type='search' disabled>
      </div>
      <div class='border-start title-header name'>
        <div class='title-profile'>Đơn giá</div>
        <input class='form-control input-profile ' type='search' disabled>
      </div>
      <div class='border-start title-header name'>
        <div class='title-profile'>Thành tiền</div>
        <input class='form-control input-profile ' type='search' disabled>
      </div>
    </form>
    <div class='outer animated fadeIn'
         infiniteScroll [alwaysCallback]='true'
         [infiniteScrollDistance]='1'
         [infiniteScrollThrottle]='100'
         [scrollWindow]='false'
         *ngIf='(salary$|async) as salaries'
         [ngStyle]="{'width':salaries.length === 0 ? header.offsetWidth + 'px': 'fit-content',
         'overflow-y':salaries.length === 0 ? 'hidden': 'scroll'}">
      <div class='row-content' *ngFor='let salary of salaries' (contextmenu)='child.onContextMenu($event,salary)'>
        <app-mouse-right #child (readAndUpdateEvent)='readPayroll($event)'>
        </app-mouse-right>
        <div class='content-profile default pointer ' (click)='readPayroll(salary)'>
          {{salary?.employee?.id}}
        </div>
        <div class='content-profile name pointer ' (click)='readPayroll(salary)'>
          {{salary?.employee?.firstName}} {{salary?.employee?.lastName}}
        </div>
        <div class='content-profile gender pointer '> {{
          salary?.employee?.gender === 'MALE' ? 'Nam' :
            salary?.employee?.gender === 'FEMALE' ? 'Nữ' :
              'Khác'
          }}</div>
        <div class='content-profile default pointer ' (click)='readPayroll(salary)'>
          {{salary?.employee?.position?.name}}
        </div>
        <div class='content-profile name pointer ' (click)='readPayroll(salary)'>
          {{salary?.datetime |date: 'MM-yyyy'}}
        </div>
        <div class='content-profile note pointer ' (click)='readPayroll(salary)'>
          {{salary?.title}}
        </div>
        <div class='content-profile default pointer ' (click)='readPayroll(salary)'>
          {{salary?.times}} {{salary?.unit === unit.DAY ? 'Ngày' : 'Giờ'}}
        </div>
        <div class='content-profile name pointer ' (click)='readPayroll(salary)'>
          {{salary?.price ? salary.price : 0}}VND
        </div>
        <div class='content-profile name pointer ' (click)='readPayroll(salary)'>
          {{salary?.price && salary?.times ? salary.price * salary.times : 0 }} VND
        </div>
      </div>
      <div *ngIf='!salaries || salaries.length === 0 ' style='height:60vh; '
           class=' d-flex justify-content-center align-content-center'>
        <div class='font-xl font-weight-bold d-flex align-items-center'>
          Hiện chưa có phiếu lương nào!
        </div>
      </div>
    </div>
  </div>
</ng-template>
