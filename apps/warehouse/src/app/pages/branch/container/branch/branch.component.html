<div class="p-2 d-flex">
  <div class="d-flex flex-column mt-2">
    <mat-accordion>
      <mat-expansion-panel [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title class="font-weight-bold">
            Tìm kiếm
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div [formGroup]="formGroup">
          <input class="form-control" type="search" formControlName="search">
        </div>
      </mat-expansion-panel>
    </mat-accordion>
    <mat-accordion>
      <mat-expansion-panel class="mt-2" [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title class="font-weight-bold">
            Trạng thái
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div [formGroup]="formGroup">
          <mat-radio-group aria-label="Select an option" formControlName="status" class="d-flex flex-column">
            <mat-radio-button [value]="-1">Tất cả</mat-radio-button>
            <mat-radio-button [value]="1">Đang hoạt động</mat-radio-button>
            <mat-radio-button [value]="0">Ngưng hoạt động</mat-radio-button>
          </mat-radio-group>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
    <div class="mt-2"><span class="font-weight-bold">Tổng chi nhánh : {{(branches$|async)?.length}}</span></div>
  </div>
  <div class="mt-4">
    <div class="d-flex justify-content-between">
      <div class="font-weight-bold font-xl ml-2">Chi nhánh</div>
      <button nz-button nzType="primary" (click)="onAdd()">Thêm chi nhánh</button>
    </div>

    <div class="ml-2 mt-2" style="width: 80vw ; overflow: auto ; height: 70vh;">
      <nz-table
        [nzLoading]="loading$|async"
        [nzData]="(branches$|async) || []"
        nzShowPagination="false"
        [nzScroll]="{x:'', y:'50vh'}"
        nzSize="small"
      >
        <thead>
        <tr>
          <th>
            STT
          </th>
          <th>
            Tên chi nhánh
          </th>
          <th>
            Địa chỉ
          </th>
          <th>
            Điện thoại
          </th>
          <th>
            số lượng người dùng
          </th>
          <th>
            Trạng thái
          </th>
        </tr>
        </thead>
        <tbody>
          <tr *ngFor="let branch of branches$|async;let i = index" class="pointer"
              (contextmenu)='child.onContextMenu($event,branch)'>
            <td>
                {{i + 1}}
            </td>
            <td>
                {{branch.name}}
            </td>
            <td>
                {{branch?.address | existpipe}}
            </td>
            <td>
                {{branch?.phone | existpipe }}
            </td>
            <td>
                Đang phát triển
            </td>
            <td>
                {{branch.status ? 'Đang hoạt động' : 'Ngưng hoạt động'}}
            </td>
          </tr>

        </tbody>
      </nz-table>
    </div>
  </div>

</div>
<style>
  table thead td {
    background: white;
  }

  table tbody th div {
    display: flex;
    justify-content: center;
    align-content: center;
  }
</style>
<app-mouse-right #child
                 (onAdd)='onAdd()'
                 (onDel)='onDelete($event)'
                 (onUpdate)='onUpdate($event)'>
</app-mouse-right>
