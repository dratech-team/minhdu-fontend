<div style='width: 500px'>
  <h2 *ngIf='!data.isUpdate' mat-dialog-title>Tạo tài khoản</h2>
  <h2 *ngIf='data.isUpdate' mat-dialog-title>Cập nhật tài khoản</h2>
  <mat-dialog-content class='mat-typography'>
    <form [formGroup]='formGroup' *ngIf='!data.isUpdate'>
      <div class='row'>
        <div class='col-sm'>
          <label for='userName'>Tên tài khoản<span class='star'>*</span>
          </label>
          <input  type='text' class='form-control' id='userName' formControlName='userName'
                 [ngClass]="{ 'is-invalid': submitted && checkValid.userName.errors }">
          <div *ngIf='submitted && checkValid.userName.errors' class='invalid-feedback'>
            <div *ngIf='checkValid.userName.errors?.required'>Chưa nhập tên tài khoản</div>
          </div>
        </div>
      </div>
      <div class='row mt-3'>
        <div class='col-sm'>
          <label>Mật khẩu<span class='star'>*</span></label>
          <input  type='password' class='form-control' id='password' formControlName='password'
                 [ngClass]="{ 'is-invalid': submitted && checkValid.password.errors }">
          <div *ngIf='submitted && checkValid.password.errors' class='invalid-feedback'>
            <div *ngIf='checkValid.password.errors?.required'>Chưa nhập mật khẩu</div>
          </div>
        </div>
      </div>
      <div class='row mt-3'>
        <div class='col-sm'>
          <div class='d-flex flex-column'>
            <span *ngIf='isHidden' style='color: red; font-size: 10px'>Nhập lại mật khẩu chưa đúng</span>
            <label>Nhập lại Mật khẩu<span class='star'>*</span></label>
          </div>
          <input  type='password' class='form-control' id='password2' formControlName='password2'
                 [ngClass]="{ 'is-invalid': submitted && checkValid.password2.errors }">
          <div *ngIf='submitted && checkValid.password2.errors' class='invalid-feedback'>
            <div *ngIf='checkValid.password2.errors?.required'>Chưa nhập lại mật khẩu</div>
          </div>
        </div>
      </div>
      <div class='row mt-3'>
        <div class='col-sm'>
          <label>Đơn vị </label><span class='star'>*</span>
          <input class='form-control' type='text' matInput [formControl]='branches' [matAutocomplete]='branch'
                 #branchInput
                 [ngClass]="{ 'is-invalid': submitted && !branchId }">
          <mat-autocomplete #branch='matAutocomplete'>
            <mat-option *ngFor='let branch of branches$ | async'
                        [value]='!branch.id ? branchInput.value : branch.name'
                        (onSelectionChange)='onCreateBranch($event,branch)'>
              {{branch.name}}
            </mat-option>
          </mat-autocomplete>
          <div *ngIf='submitted && !branchId' class='invalid-feedback'>
            <div>Chưa chọn đơn vị</div>
          </div>
        </div>
      </div>
      <div *ngIf='localhost === localhostEnum.APP_HR' class='row mt-3'>
        <div class='col-sm' [formGroup]='formGroup'>
          <label>Phân quyền<span class='star'>*</span></label>
          <mat-select class='form-control' formControlName='role'
                      [ngClass]="{ 'is-invalid': submitted && checkValid.role.errors }">
            <mat-option *ngFor='let item of roleAppHR' [value]='item.role'>
              {{item.name}}
            </mat-option>
          </mat-select>
        </div>
      </div>
      <div *ngIf='localhost === localhostEnum.APP_SELL ' class='row mt-3'>
        <div class='col-sm' [formGroup]='formGroup'>
          <label>Phân quyền<span class='star'>*</span></label>
          <mat-select class='form-control' formControlName='role'
                      [ngClass]="{ 'is-invalid': submitted && checkValid.role.errors }">
            <mat-option *ngFor='let item of roleAppSell' [value]='item.role'>
              {{item.name}}
            </mat-option>
          </mat-select>
        </div>
      </div>
      <div *ngIf='localhost === localhostEnum.APP_WAREHOUSE ' class='row mt-3'>
        <div class='col-sm' [formGroup]='formGroup'>
          <label>Phân quyền<span class='star'>*</span></label>
          <mat-select class='form-control' formControlName='role'
                      [ngClass]="{ 'is-invalid': submitted && checkValid.role.errors }">
            <mat-option value='{{role.ADMIN}}'>
              Quản trị viên
            </mat-option>
            <mat-option value='{{role.NONE}}'>
              none
            </mat-option>
          </mat-select>
        </div>
      </div>
      <div *ngIf='submitted && checkValid.role.errors' class='invalid-feedback' style='display: block'>
        <div>Chưa chọn phân quyền</div>
      </div>
      <div class='row d-flex mt-3 justify-content-center'>
        <button (click)='onSubmit()' class='btn btn-dark ml-2'> Xác nhận</button>
      </div>
    </form>
    <form [formGroup]='formGroup' *ngIf='data.isUpdate'>
      <div class='row mt-3'>
        <div class='col-sm'>
          <label>Đơn vị </label><span class='star'>*</span>
          <input class='form-control' type='text' matInput [formControl]='branches' [matAutocomplete]='branch'
                 #branchInput
                 [ngClass]="{ 'is-invalid': submitted && !branchId }">
          <mat-autocomplete #branch='matAutocomplete'>
            <mat-option *ngFor='let branch of branches$ | async'
                        [value]='!branch.id ? branchInput.value : branch.name'
                        (onSelectionChange)='onCreateBranch($event,branch)'>
              {{branch.name}}
            </mat-option>
          </mat-autocomplete>
          <div *ngIf='submitted && !branchId' class='invalid-feedback'>
            <div>Chưa chọn đơn vị</div>
          </div>
        </div>
      </div>
      <div *ngIf='localhost === localhostEnum.APP_HR' class='row mt-3'>
        <div class='col-sm' [formGroup]='formGroup'>
          <label>Phân quyền<span class='star'>*</span></label>
          <mat-select class='form-control' formControlName='role'
                      [ngClass]="{ 'is-invalid': submitted && checkValid.role.errors }">
            <mat-option *ngFor='let item of roleAppHR' [value]='item.role'>
              {{item.name}}
            </mat-option>
          </mat-select>
        </div>
      </div>
      <div *ngIf='localhost === localhostEnum.APP_SELL ' class='row mt-3'>
        <div class='col-sm' [formGroup]='formGroup'>
          <label>Phân quyền<span class='star'>*</span></label>
          <mat-select class='form-control' formControlName='role'
                      [ngClass]="{ 'is-invalid': submitted && checkValid.role.errors }">
            <mat-option *ngFor='let item of roleAppSell' [value]='item.role'>
              {{item.name}}
            </mat-option>
          </mat-select>
        </div>
      </div>
      <div *ngIf='localhost === localhostEnum.APP_WAREHOUSE ' class='row mt-3'>
        <div class='col-sm' [formGroup]='formGroup'>
          <label>Phân quyền<span class='star'>*</span></label>
          <mat-select class='form-control' formControlName='role'
                      [ngClass]="{ 'is-invalid': submitted && checkValid.role.errors }">
            <mat-option value='{{role.ADMIN}}'>
              Quản trị viên
            </mat-option>
            <mat-option value='{{role.NONE}}'>
              none
            </mat-option>
          </mat-select>
        </div>
      </div>
      <div *ngIf='submitted && checkValid.role.errors' class='invalid-feedback' style='display: block'>
        <div>Chưa chọn phân quyền</div>
      </div>
      <div class='row d-flex mt-3 justify-content-center'>
        <button (click)='onSubmit()' class='btn btn-dark ml-2'> Xác nhận</button>
      </div>
    </form>
  </mat-dialog-content>
</div>





