<div style='min-height: 80vh'>
  <div style='width: 96%' class='mx-auto'>
    <div class=' h3 mt-3 ml-3'>Lịch sử hệ thống</div>
    <div class='mt-3 ml-3 font-weight-bold'>
      Tổng: {{total$|async}}
    </div>
    <div
    >
      <nz-table [nzData]="(systemHistory$|async)||[]"
                #tableSystemHistory
                [formGroup]='formGroup'
                nzSize="small"
                [nzScroll]="{x:'2000px',y:'60vh'}"
      >
        <thead>
        <tr>
          <th nzLeft nzWidth="60px">
            <div class='font-weight-bold'>stt</div>
            <input nz-input disabled>
          </th>
          <th nzLeft nzWidth="200px">
            <div>Ứng dụng</div>
            <nz-select style='width: 100%' formControlName='appName'>
              <nz-option *ngFor='let item of apps' [nzValue]="item.app" [nzLabel]="item.name"></nz-option>
            </nz-select>
          </th>
          <th nzLeft nzWidth="200px">
            <div class='font-weight-bold'>Tài khoản</div>
            <input nz-input placeholder='Nhập tên đăng nhập' type='search' formControlName='name'>
          </th>
          <th>
            <div class='font-weight-bold'>Hành động</div>
            <nz-select style="width: 100%" formControlName='activity'>
              <nz-option *ngFor='let item of methods ' [nzValue]="item.method" [nzLabel]="item.name"></nz-option>
            </nz-select>
          </th>
          <th>
            <div class='text-center'>mô tả</div>
            <input nz-input type='text' disabled>
          </th>
          <th>
            <div class='text-center'>Địa chỉ máy</div>
            <input nz-input type='search' formControlName='ip'>
          </th>
          <th>
            <div class='text-center'>Ngày</div>
            <input nz-input type='date' formControlName='createdAt'>
          </th>
        </tr>
        </thead>
        <tbody>
        <ng-template ngFor let-systemHistory [ngForOf]="tableSystemHistory.data" let-i='index'>
          <tr class="pointer">
            <td nzLeft>
              {{i + 1}}
            </td>
            <td nzLeft>
              {{systemHistory?.appName ? (systemHistory.appName |transformApp:apps) : 'Chưa xác định'}}
            </td>
            <td nzLeft>
              {{systemHistory.name}}
            </td>
            <td>
              {{systemHistory.activity|transformMethod: methods}}
            </td>
            <td>
              {{systemHistory.description}}
            </td>
            <td>
              {{systemHistory.ip}}
            </td>
            <td>
              {{systemHistory.createdAt|date:'h:mm:ss a, dd-MM-yyyy'}}
            </td>
          </tr>
        </ng-template>
        </tbody>
      </nz-table>
    </div>
  </div>
</div>
