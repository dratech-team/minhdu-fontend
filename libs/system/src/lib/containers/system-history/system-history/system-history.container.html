<div class='row h3 ml-3 mt-3'>Lịch sử hệ thống</div>
<div class='main-customer mx-auto' style='width: auto'>
<!--  <ngx-skeleton-loader *ngIf='!(loaded$ | async); else systemHistory' count='10' appearance='line'></ngx-skeleton-loader>-->
<!--  <ng-template #systemHistory>-->
    <div class='main-profile'>
      <form [formGroup]='formGroup' #header class='header-profile mt-3 animated fadeIn'>
        <div class='border-start title-header default'>
          <div class='title-profile'>Ứng dụng</div>
          <input formControlName='appName'
                 class='form-control  '
                 type='text'>
        </div>
        <div class='border-start title-header name'>
          <div class='title-profile'>Tài khoản</div>
          <input formControlName='name'
                 class='form-control  '
                 type='text'>
        </div>
        <div class='border-start title-header name'>
          <div class='title-profile'>Hành động</div>
          <input formControlName='activity'
                 class='form-control  '
                 type='text'>
        </div>
        <div class='border-start title-header note'>
          <div class='title-profile'>Mô tả</div>
          <input formControlName='description'
                 class='form-control input-profile '
                 type='text'>
        </div>
        <div class='border-start title-header name'>
          <div class='title-profile'>Địa chỉ máy</div>
          <input formControlName='ip'
                 class='form-control input-profile '
                 type='text'>
        </div>
        <div class='border-start title-header name'>
          <div class='title-profile'>Ngày</div>
          <input formControlName='createdAt'
                 class='form-control input-profile '
                 type='date'>
        </div>
      </form>
      <div class='outer animated fadeIn d-flex'
           infiniteScroll
           [infiniteScrollDistance]='0.5'
           [scrollWindow]='false'
           [alwaysCallback]='true'
           (scrolled)='onScroll()'
           *ngIf='(systemHistory$| async) as systemHistories'
           [ngStyle]="{'width':systemHistories.length === 0 ? header.offsetWidth + 'px': 'auto',
         'overflow-y':systemHistories.length === 0 ? 'hidden': 'scroll'}"
      >
        <div class='row-content' *ngFor='let systemHistory of systemHistories'>
          <div class='content-profile  default ' *ngIf='systemHistory.appName === app.SELL'>Bán hàng</div>
          <div class='content-profile  default ' *ngIf='systemHistory.appName === app.WAREHOUSE'>Kho</div>
          <div class='content-profile  default ' *ngIf='systemHistory.appName === app.HUMAN_RESOURCE'>Nhan sự</div>
          <div class='content-profile  default ' *ngIf='systemHistory.appName === app.UNKNOWN'>Chưa xác định</div>
          <div class='content-profile name pointer '>{{systemHistory.name}}</div>
          <div class='content-profile  name ' *ngIf='systemHistory.activity === activityType.DELETE'>
            Xóa
          </div>
          <div class='content-profile  name ' *ngIf='systemHistory.activity === activityType.POST'>
            Thêm
          </div>
          <div class='content-profile  name ' *ngIf='systemHistory.activity === activityType.PATCH'>
            Chỉnh sửa
          </div>
          <div class='content-profile  name ' *ngIf='systemHistory.activity === activityType.GET'>
            xem dữ liệu
          </div>
          <div class='content-profile note pointer '>{{systemHistory.description}}</div>
          <div class='content-profile name pointer ' *ngIf='systemHistory?.ip'>{{systemHistory?.ip}}</div>
          <div class='content-profile name pointer ' *ngIf='!systemHistory?.ip'>Chưa xác định</div>
          <div class='content-profile  name '> {{systemHistory?.createdAt| date:'h:mm , dd/MM/yyyy'}}</div>
        </div>
        <div *ngIf='!systemHistories || systemHistories.length === 0 ' style='height:60vh; '
             class=' d-flex justify-content-center align-content-center'>
          <div class='font-xl font-weight-bold d-flex align-items-center'>
            Hiện chưa có lịch sử hệ thống nào!
          </div>
        </div>
      </div>
    </div>
<!--  </ng-template>-->
</div>
<div class='mx-auto' style='width: 1300px'>
<div class='fixTableHead mt-5 mx-auto'>
  <table [formGroup]='formGroup' class='mt-3' style='width: 1300px'
         infiniteScroll
         [infiniteScrollDistance]='0.5'
         [scrollWindow]='false'
         [alwaysCallback]='true'
         (scrolled)='onScroll()'
         *ngIf='(systemHistory$| async) as systemHistories'
  >
    <thead>
    <tr>
      <th>
        <div class='border-top d-flex justify-content-center align-items-center'>Ứng dụng</div>
        <input type='text' disabled>
      </th>
      <th>
        <div class='border-top d-flex justify-content-center align-items-center'>Tài khoản</div>
        <input class='form-control text-center' placeholder='Nhập tên đăng nhập' type='text'
               formControlName='username'>
      </th>
      <th>
        <div class='border-top d-flex justify-content-center align-items-center'>Hành động</div>
        <input type='text' disabled>
      </th>
      <th>
        <div class='border-top d-flex justify-content-center align-items-center'>mô tả</div>
        <input type='text' disabled>
      </th>
      <th>
        <div class='border-top d-flex justify-content-center align-items-center'>Địa chỉ máy</div>
        <input type='text' disabled>
      </th>
      <th>
        <div class='border-top d-flex justify-content-center align-items-center'>Ngày</div>
        <input type='text' disabled>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor='let systemHistory of systemHistories'
        (contextmenu)='child.onContextMenu($event,systemHistory)'>
      <th class='pointer' >
        {{account?.id}}
      </th>
      <th class='pointer'>
        {{account.username}}
      </th>
      <th class='pointer' >
           <span class='mr-1  d-inline-block'
                 *ngFor='let item of account.branches'> {{item.name}},</span>
      </th>
      <th class='pointer' >
        {{account.role?.name}}
      </th>
      <th class='pointer' >
        {{account.loggedAt|date:'h:mm , dd-MM-yyyy'}}
      </th>
      <th class='pointer' >
        {{account.ip}}
      </th>
      <th class='pointer' >
        {{account.createdAt|date:'dd-MM-yyyy'}}
      </th>
    </tr>
    <tr *ngIf='accounts.length === 0' style='height: 50vh'>
      <td colspan='7' class='text-center check-content font-weight-bold font-xl '>Hiện không có tài khoản nào
      </td>
    </tr>
    </tbody>
  </table>
</div>
</div>
