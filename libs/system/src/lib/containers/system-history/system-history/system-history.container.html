<div class='main-customer mx-auto' style='width: auto'>
    <ngx-skeleton-loader *ngIf='!(loaded$ | async)' count='10' appearance='line'></ngx-skeleton-loader>
</div>
<div class='mx-auto' style='width: 1300px'>
  <div class='row h3 mt-3'>Lịch sử hệ thống</div>
  <div class='fixTableHead mt-5 mx-auto'
       infiniteScroll
       [infiniteScrollDistance]='0.5'
       [scrollWindow]='false'
       [alwaysCallback]='true'
       (scrolled)='onScroll()'
       *ngIf='(loaded$ | async)'
  >
    <table [formGroup]='formGroup' class='mt-3' style='width: 1300px'>
      <thead>
      <tr>
        <th width='10%'>
          <div class='title-profile font-weight-bold'>Ứng dụng</div>
          <select class='select' matNativeControl required formControlName='appName'>
            <option *ngFor='let item of apps' [value]='item.app'>{{item.name}}</option>
          </select>
        </th>
        <th width='10%'>
          <div class='title-profile font-weight-bold'>Tài khoản</div>
          <input class='form-control text-center' placeholder='Nhập tên đăng nhập' type='text'
                 formControlName='name'>
        </th>
        <th width='7%'>
          <div class='title-profile font-weight-bold'>Hành động</div>
          <select class='select' matNativeControl required formControlName='activity'>
            <option *ngFor='let item of methods ' [value]='item.method'>{{item.name}}</option>
          </select>
        </th>
        <th>
          <div class='border-top d-flex justify-content-center align-items-center'>mô tả</div>
          <input type='text' disabled>
        </th>
        <th width='10%'>
          <div class='border-top d-flex justify-content-center align-items-center'>Địa chỉ máy</div>
          <input type='text' formControlName='ip'>
        </th>
        <th width='10%'>
          <div class='border-top d-flex justify-content-center align-items-center'>Ngày</div>
          <input type='date' formControlName='createdAt'>
        </th>
      </tr>
      </thead>
      <tbody *ngIf='(systemHistory$| async) as systemHistories'>
      <tr *ngFor='let systemHistory of systemHistories'>
        <th class='pointer'>
          {{systemHistory?.appName ? (systemHistory.appName |transformApp:apps) : 'Chưa xác định'}}
        </th>
        <th class='pointer'>
          {{systemHistory.name}}
        </th>
        <th class='pointer'>
          {{systemHistory.activity|transformMethod: methods}}
        </th>
        <th class='pointer'>
          {{systemHistory.description}}
        </th>
        <th class='pointer'>
          {{systemHistory.ip}}
        </th>
        <th class='pointer'>
          {{systemHistory.createdAt|date:'h-mm, dd-MM-yyyy'}}
        </th>
      </tr>
      <tr *ngIf='systemHistories.length === 0' style='height: 50vh'>
        <td colspan='7' class='text-center check-content font-weight-bold font-xl '>Hiện không có tài khoản nào
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
